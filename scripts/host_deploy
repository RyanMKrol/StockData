AES_PASS=$1

cd ~
rm -rf StockDataUpdater
git clone https://github.com/RyanMKrol/StockDataUpdater.git
cd StockDataUpdater
openssl aes-256-cbc -d -a -in credentials/alphavantage.json.enc -out credentials/alphavantage.json -k $AES_PASS
openssl aes-256-cbc -d -a -in credentials/dynamo.json.enc -out credentials/dynamo.json -k $AES_PASS
openssl aes-256-cbc -d -a -in credentials/gmail.json.enc -out credentials/gmail.json -k $AES_PASS
git pull
npm install
npm run build
pm2 delete StockDataUpdater
pm2 start build/src/index.js --name StockDataUpdater
pm2 save
